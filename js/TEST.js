


var elevationData =
{
   "results" : [
      {
         "elevation" : 2135.62255859375,
         "location" : {
            "lat" : 40.38913,
            "lng" : -111.60277
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2137.87548828125,
         "location" : {
            "lat" : 40.38907920221629,
            "lng" : -111.6029033443556
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2138.1962890625,
         "location" : {
            "lat" : 40.38903056606954,
            "lng" : -111.60301
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2134.152587890625,
         "location" : {
            "lat" : 40.38894715877843,
            "lng" : -111.6030718941759
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2130.929443359375,
         "location" : {
            "lat" : 40.38885371987372,
            "lng" : -111.6031557970669
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2127.480712890625,
         "location" : {
            "lat" : 40.3887608237,
            "lng" : -111.6032415476265
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2125.555908203125,
         "location" : {
            "lat" : 40.38866792746295,
            "lng" : -111.6033272979495
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2127.918701171875,
         "location" : {
            "lat" : 40.38857984405666,
            "lng" : -111.60342
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2123.948486328125,
         "location" : {
            "lat" : 40.38846825854861,
            "lng" : -111.6033983226483
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2122.142822265625,
         "location" : {
            "lat" : 40.38835609536705,
            "lng" : -111.6034026030898
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2121.64990234375,
         "location" : {
            "lat" : 40.38824628527225,
            "lng" : -111.60341
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2121.017333984375,
         "location" : {
            "lat" : 40.38813272686394,
            "lng" : -111.60341
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2120.929931640625,
         "location" : {
            "lat" : 40.38802659217342,
            "lng" : -111.6034447262653
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2119.741455078125,
         "location" : {
            "lat" : 40.38792403113249,
            "lng" : -111.6035059688726
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2117.963134765625,
         "location" : {
            "lat" : 40.38783369320721,
            "lng" : -111.6035963068582
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2115.804931640625,
         "location" : {
            "lat" : 40.38774044688676,
            "lng" : -111.6036797765598
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2113.9482421875,
         "location" : {
            "lat" : 40.38764438254989,
            "lng" : -111.6037580557355
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2113.466796875,
         "location" : {
            "lat" : 40.38756106585668,
            "lng" : -111.6038585789127
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2111.769287109375,
         "location" : {
            "lat" : 40.38747576566262,
            "lng" : -111.6039563515148
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2110.810791015625,
         "location" : {
            "lat" : 40.38739351287105,
            "lng" : -111.604055135513
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2109.610107421875,
         "location" : {
            "lat" : 40.38728676725242,
            "lng" : -111.6040976767226
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2106.521728515625,
         "location" : {
            "lat" : 40.38717698171165,
            "lng" : -111.6040693635538
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2103.022216796875,
         "location" : {
            "lat" : 40.38706938881337,
            "lng" : -111.6040264629351
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2099.622802734375,
         "location" : {
            "lat" : 40.38696283659057,
            "lng" : -111.6039961939037
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2097.993896484375,
         "location" : {
            "lat" : 40.3868617079435,
            "lng" : -111.6040582921008
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2096.633544921875,
         "location" : {
            "lat" : 40.38677137050425,
            "lng" : -111.6041486294993
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2093.9921875,
         "location" : {
            "lat" : 40.38666876401206,
            "lng" : -111.6041912360077
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2092.0400390625,
         "location" : {
            "lat" : 40.38660659633501,
            "lng" : -111.6042089357791
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2091.14404296875,
         "location" : {
            "lat" : 40.38668657428189,
            "lng" : -111.6041102771579
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2088.16845703125,
         "location" : {
            "lat" : 40.38673000000213,
            "lng" : -111.603979846658
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2083.069091796875,
         "location" : {
            "lat" : 40.38664924460227,
            "lng" : -111.6039092445983
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2080.34228515625,
         "location" : {
            "lat" : 40.38655739379172,
            "lng" : -111.6039550708275
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2076.143798828125,
         "location" : {
            "lat" : 40.38646443219715,
            "lng" : -111.603957216097
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2072.22216796875,
         "location" : {
            "lat" : 40.38635726199283,
            "lng" : -111.6039496428098
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2074.144287109375,
         "location" : {
            "lat" : 40.38642995153133,
            "lng" : -111.6039216351954
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2077.74951171875,
         "location" : {
            "lat" : 40.38653795368941,
            "lng" : -111.6038755715604
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2081.603515625,
         "location" : {
            "lat" : 40.38664595582922,
            "lng" : -111.6038295077776
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2085.799560546875,
         "location" : {
            "lat" : 40.38675395795075,
            "lng" : -111.6037834438472
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2087.118408203125,
         "location" : {
            "lat" : 40.38686196005401,
            "lng" : -111.603737379769
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2087.90380859375,
         "location" : {
            "lat" : 40.38696996213898,
            "lng" : -111.603691315543
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2090.784423828125,
         "location" : {
            "lat" : 40.38707796420568,
            "lng" : -111.6036452511694
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2093.26171875,
         "location" : {
            "lat" : 40.38718596625409,
            "lng" : -111.603599186648
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2095.704345703125,
         "location" : {
            "lat" : 40.38729396828424,
            "lng" : -111.6035531219789
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2098.4404296875,
         "location" : {
            "lat" : 40.3874019702961,
            "lng" : -111.603507057162
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2101.1845703125,
         "location" : {
            "lat" : 40.38750997228968,
            "lng" : -111.6034609921975
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2105.205810546875,
         "location" : {
            "lat" : 40.38761797426498,
            "lng" : -111.6034149270851
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2108.650390625,
         "location" : {
            "lat" : 40.38772597622201,
            "lng" : -111.6033688618251
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2111.464111328125,
         "location" : {
            "lat" : 40.38783397816077,
            "lng" : -111.6033227964173
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2113.669921875,
         "location" : {
            "lat" : 40.38794198008124,
            "lng" : -111.6032767308618
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2112.8505859375,
         "location" : {
            "lat" : 40.38804998198344,
            "lng" : -111.6032306651585
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2111.333740234375,
         "location" : {
            "lat" : 40.38815798386735,
            "lng" : -111.6031845993075
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2110.65869140625,
         "location" : {
            "lat" : 40.38826598573298,
            "lng" : -111.6031385333087
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2108.55712890625,
         "location" : {
            "lat" : 40.38837398758034,
            "lng" : -111.6030924671622
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2107.06640625,
         "location" : {
            "lat" : 40.38848198940941,
            "lng" : -111.603046400868
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2108.85546875,
         "location" : {
            "lat" : 40.38858999122021,
            "lng" : -111.603000334426
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2113.0146484375,
         "location" : {
            "lat" : 40.38869799301273,
            "lng" : -111.6029542678363
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2118.62744140625,
         "location" : {
            "lat" : 40.38880599478697,
            "lng" : -111.6029082010989
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2124.85205078125,
         "location" : {
            "lat" : 40.38891399654291,
            "lng" : -111.6028621342136
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2130.5712890625,
         "location" : {
            "lat" : 40.38902199828059,
            "lng" : -111.6028160671807
         },
         "resolution" : 9.543951988220215
      },
      {
         "elevation" : 2135.62255859375,
         "location" : {
            "lat" : 40.38912999999999,
            "lng" : -111.60277
         },
         "resolution" : 9.543951988220215
      }
   ],
   "status" : "OK"
}

var elevationData2 = elevationData.results;

var latlong = [];
var elData = []
var reso = [];
for(var k = 0; k < elevationData2.length; k++) {
    elData.push(elevationData2[k].elevation * 3.28);
    reso.push(elevationData2[k].resolution * 3.28);
    latlong.push([elevationData2[k].location.lat,elevationData2[k].location.lng])
}

function initMap(){
  var path = latlong;

  var elevator = new google.maps.ElevationService;

  elevator.getElevationAlongPath({
    'path': path,
    'samples': 256
  }, plotElevation);
}


var testCord = [ [ -111.602765529917576, 40.389125396609018 ], [ -111.602980240698173, 40.389047695326553 ], [ -111.603014647823215, 40.389024991244014 ], [ -111.603009984806306, 40.389038529293202 ], [ -111.603089571095609, 40.388920994865941 ], [ -111.603152709325173, 40.388857599635458 ], [ -111.603393425200238, 40.388599576697459 ], [ -111.603420475298606, 40.388576916615079 ], [ -111.60341790028923, 40.388536388467742 ], [ -111.603400483225926, 40.388482424271558 ], [ -111.603388836183569, 40.388414916026136 ], [ -111.603403446236712, 40.388360784829331 ], [ -111.603424522313333, 40.388329139714301 ], [ -111.603408575255344, 40.388275171518103 ], [ -111.603409935260288, 40.388221110321524 ], [ -111.603407283250647, 40.388171570141424 ], [ -111.603411996267766, 40.388121995961228 ], [ -111.603410819263502, 40.388072451781113 ], [ -111.603446461393048, 40.38802271660029 ], [ -111.603467369469058, 40.387973054419774 ], [ -111.603495359570843, 40.387932366271855 ], [ -111.603545730753979, 40.387882554090766 ], [ -111.603668397199897, 40.387764791662619 ], [ -111.603689308275932, 40.387715133482118 ], [ -111.603782025612986, 40.387624554152808 ], [ -111.603895727026327, 40.387533866823105 ], [ -111.603950800226585, 40.387475017609177 ], [ -111.604037533541884, 40.387416004394652 ], [ -111.604077841688422, 40.387352728164615 ], [ -111.604101369773957, 40.387307561000398 ], [ -111.60408502471455, 40.387208547640455 ], [ -111.604041631556754, 40.38713219636287 ], [ -111.604031942521544, 40.387078192166541 ], [ -111.604012313450198, 40.387024237970365 ], [ -111.603994440385236, 40.387001807888851 ], [ -111.603999075402044, 40.386943226675896 ], [ -111.604032095522086, 40.386888999478742 ], [ -111.604141912921364, 40.386775810067263 ], [ -111.604169652022165, 40.386748635968445 ], [ -111.604174692040488, 40.386694552771814 ], [ -111.604241754284317, 40.386617623492157 ], [ -111.604221266209834, 40.386590707394305 ], [ -111.604198312126357, 40.386617850492996 ], [ -111.604151054954571, 40.386645127592146 ], [ -111.604132596887496, 40.386681260723492 ], [ -111.604103264780861, 40.386694925773213 ], [ -111.604072827670166, 40.386708601822932 ], [ -111.604028436508827, 40.38672685288924 ], [ -111.603974724313559, 40.386731638906667 ], [ -111.603930343152172, 40.386709346825626 ], [ -111.603935948172591, 40.386677786710891 ], [ -111.603919552112984, 40.386655347629301 ], [ -111.603893578018528, 40.386632964547914 ], [ -111.603917634105983, 40.38660580844919 ], [ -111.603975738317217, 40.386515414120595 ], [ -111.603992025376442, 40.386483798005656 ], [ -111.603959096256744, 40.386465949940771 ], [ -111.603938852183148, 40.386425514793757 ], [ -111.60393334016311, 40.386385000646499 ], [ -111.603960915263315, 40.386339813482209 ] ] 
console.log(testCord.length)

var danny = [];
for(var d = 0; d < testCord.length; d++) {
    danny.push([testCord[d][1], testCord[d][0]])
}








function createEncodings(coords) {
	var i = 0;
 
	var plat = 0;
	var plng = 0;
 
	var encoded_points = "";
 
	for(i = 0; i < coords.length; ++i) {
	    var lat = coords[i][0];				
		var lng = coords[i][1];		
 
		encoded_points += encodePoint(plat, plng, lat, lng);
 
	    plat = lat;
	    plng = lng;
	}
 
	// close polyline
	encoded_points += encodePoint(plat, plng, coords[0][0], coords[0][1]);
  console.log(encoded_points)
 
	return encoded_points;
}
 
function encodePoint(plat, plng, lat, lng) {
	var late5 = Math.round(lat * 1e5);
    var plate5 = Math.round(plat * 1e5)    
 
	var lnge5 = Math.round(lng * 1e5);
    var plnge5 = Math.round(plng * 1e5)
 
	dlng = lnge5 - plnge5;
	dlat = late5 - plate5;
 
    return encodeSignedNumber(dlat) + encodeSignedNumber(dlng);
}
 
function encodeSignedNumber(num) {
  var sgn_num = num << 1;
 
  if (num < 0) {
    sgn_num = ~(sgn_num);
  }
 
  return(encodeNumber(sgn_num));
}
 
function encodeNumber(num) {
  var encodeString = "";
 
  while (num >= 0x20) {
    encodeString += (String.fromCharCode((0x20 | (num & 0x1f)) + 63));
    num >>= 5;
  }
 
  encodeString += (String.fromCharCode(num + 63));
  return encodeString;
}

createEncodings(danny)








var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
  type: 'line',


  options: {
    responsive: true,
    maintainAspectRatio: false,
    elements: {
        point:{
            radius: 0
              }
    }
    },
  data: {
    labels: reso,
    datasets: [{
      label: 'elevation',
      data: elData,
      backgroundColor: "rgba(15,150,255,0.4)",
    }
    ]
  }
});



//------------------Distance between two lat/long points



function distance(lat1, lon1, lat2, lon2) {
	var radlat1 = Math.PI * lat1/180
	var radlat2 = Math.PI * lat2/180
	var theta = lon1-lon2
	var radtheta = Math.PI * theta/180
	var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
	dist = Math.acos(dist)
	dist = dist * 180/Math.PI
	dist = dist * 60 * 1.1515
  var finalDist = Math.round(dist * 100) / 100
  // console.log(finalDist + ' miles matches GIS Miles')
	return finalDist
}

// distance(40.389125396609018, -111.602765529917576, 40.386339813482209, -111.603960915263315)


//----------------More accurate Reso Distance Formula







//----------------- Reso Distance Formula


var sumFeet = reso.reduce(function(acc, val) {
  return acc + val;
}, 0);

var sumMiles = sumFeet*0.000189
console.log( sumMiles + ' miles from reso')







